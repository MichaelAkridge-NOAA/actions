# `rstudio/actions/connect-publish`

This action may be use for publishing to RStudio Connect.

> **Important Note:** The only currently supported type of
> publishing is "from manifest". This type of publishing requires
> that a `manifest.json` has already been generated by either the R
> or Python `rsconnect` package, which may be done within an
> earlier GitHub Actions step or performed locally and stored in
> git.

## Inputs

### `api-key`

An [API key genereted in RStudio
Connect](https://docs.rstudio.com/connect/__unreleased__/user/api-keys/).
This value may be included in `url` as the "user" or "password"
part.

### `dir`

Directory or directories containing the content to publish,
optionally with `:<vanity-URL>` suffixes, separated by newlines.
Without a `:<vanity-URL>` suffix, the value of the directory path
will be used to match any existing published content. Default `"."`
(current directory).

### `url`

**Required** RStudio Connect URL of the instance to which content
will be published. The value of the URL may contain an [API key
genereted in RStudio
Connect](https://docs.rstudio.com/connect/__unreleased__/user/api-keys/)
(equivalent to the `api-key` input) in the "user" or "password"
part.

## Outputs

### `results`

JSON-serialized array of objects, each containing a `dir`, `url`,
and `success` key indicating per-directory publish success. In case
of an unhandled error, the value will be an empty array.

## Example usage

```yaml
steps:
  - uses: actions/checkout@v2

  - name: Publish some things
    uses: rstudio/actions/connect-publish@main
    with:
      url: https://${{ secrets.RSTUDIO_CONNECT_API_KEY }}@connect.example.org
      dir: |
        ./very-shiny-app/:/shiny/app/path/
        ./useful-rmarkdown-report/:/reports/useful/
        ./slick-flask-api/
        ./insightful-jupyter-notebook/:/notebooks/insights/
```
